[Unit]
Description=O2 Sensor runner
Wants=network-online.target bluetooth.service
After=network-online.target bluetooth.service
OnFailure=reboot.target

[Service]
Type=simple
User=chronic
WorkingDirectory=/home/chronic/O2_Sensor

# Pre-launch: run your updater
ExecStartPre=/bin/bash -lc 'source /home/chronic/pasco_env/bin/activate && python3 Update.py'

# Main launch
ExecStart=/bin/bash -lc 'source /home/chronic/pasco_env/bin/activate && python3 RunO2.py'

Restart=on-failure
RestartSec=5

[Install]
WantedBy=multi-user.target
